%==============================================================================
% CONFIGURAÇÃO DO DOCUMENTO
%==============================================================================
\documentclass[a4paper,12pt]{extarticle}  % Classe de documento com tamanho A4 e fonte 12pt

%==============================================================================
% PACOTES E BIBLIOTECAS
%==============================================================================

% --- Configuração de página e layout ---
\usepackage[left=30mm,top=30mm,right=30mm,bottom=30mm]{geometry}  % Margens do documento
\usepackage{etoolbox}     % Necessário para a página de capa
\usepackage{adjustbox}    % Ajustes de caixas
\usepackage{fancyhdr}     % Cabeçalho e rodapé personalizados
\setlength{\headheight}{15.05pt} % Corrige erro do fancyhdr sobre headheight
\usepackage{lastpage}     % Referência à última página

% --- Suporte a idiomas e codificação ---
\usepackage[T1]{fontenc}  % Codificação de fontes
\usepackage[utf8]{inputenc}  % Suporte a caracteres UTF-8
\usepackage[portuguese]{babel}  % Suporte ao idioma português
\usepackage{newunicodechar}
\newunicodechar{₋}{$_-$}

% --- Matemática e símbolos ---
\usepackage{amsmath}      % Funções matemáticas avançadas
\usepackage{amsfonts}     % Fontes matemáticas adicionais
\usepackage{mathtools}    % Extensões para o amsmath
\usepackage{amssymb}      % Símbolos matemáticos adicionais
\usepackage{bm}           % Símbolos matemáticos em negrito
\usepackage{siunitx}      % Formatação de unidades do SI

% --- Figuras e elementos visuais ---
\usepackage{graphicx}     % Inclusão de figuras
\usepackage{subcaption}   % Suporte a subfiguras
\usepackage{xcolor}       % Suporte a cores
\usepackage[table]{xcolor} % Cores em tabelas
\usepackage{float}        % Melhor controle do posicionamento de figuras
\usepackage{tikz}         % Criação de diagramas
\usetikzlibrary{shapes.geometric, arrows}

% --- Tabelas e listas ---
\usepackage{booktabs}     % Melhora a aparência das tabelas
\usepackage{multirow}     % Células que ocupam múltiplas linhas
\usepackage{enumitem,kantlipsum}  % Personalização de listas
\usepackage[usestackEOL]{stackengine}  % Manipulação de texto em pilha

% --- Algoritmos e código ---
\usepackage[ruled,vlined]{algorithm2e}  % Algoritmos em pseudocódigo
\usepackage{listings}     % Inclusão de código-fonte
\usepackage{minted}       % Destaque de sintaxe avançado
\usemintedstyle{emacs}    % Estilo de cores para código
\usepackage{tcolorbox}    % Caixas coloridas para código/exemplos

% --- Títulos e formatação de seções ---
\usepackage{titlesec}     % Personalização de títulos de seções
\usepackage{titletoc}     % Personalização do sumário

% --- Referências e links ---
\usepackage[square,numbers,sort]{natbib}  % Gerenciamento de bibliografia
\usepackage{hyperref}     % Hiperlinks no documento
\usepackage[capitalise]{cleveref}  % Referências cruzadas inteligentes

%==============================================================================
% CONFIGURAÇÕES PERSONALIZADAS
%==============================================================================

% --- Configuração de blocos de exemplo ---
\newtcolorbox[auto counter, number within=section]{exampleblock}[2][]{
    colframe=gray!80!black, 
    colback=white, 
    coltitle=black, 
    title=Exemplo \thetcbcounter: #2, 
    #1, 
    fonttitle=\bfseries, 
    sharp corners=southwest
}

% --- Definição de cores ---
\definecolor{azulTitulos}{RGB}{0, 76, 153}  % Define uma cor azul para títulos

% --- Formatação de títulos de seções ---
\titleformat{\section}
  {\color{azulTitulos}\normalfont\Large\bfseries}  % Seções em azul, grande e negrito
  {\thesection}{1em}{}
\titleformat{\subsection}
  {\color{azulTitulos}\normalfont\large\bfseries}  % Subseções em azul, menor e negrito
  {\thesubsection}{1em}{}

% --- Configuração de hiperlinks ---
\hypersetup{
    colorlinks,  % Ativa links coloridos
    linkcolor={black},  % Links internos em preto
    citecolor={blue!50!black},  % Citações em azul escuro
    urlcolor={blue!80!black}  % URLs em azul mais claro
}

% --- Configuração do cabeçalho e rodapé ---
\pagestyle{fancy}
\fancyhf{}
\fancyhead[L]{\leftmark}
\fancyhead[R]{\thepage}
\fancyfoot[L]{CSR}
\fancyfoot[C]{Laboratório 1}
\fancyfoot[R]{\thepage\ de \pageref{LastPage}}
\renewcommand{\headrulewidth}{0.4pt}
\renewcommand{\footrulewidth}{0.4pt}

% --- Estilos de página especiais ---
% Estilo para páginas de capítulo e primeira página
\fancypagestyle{plain}{
    \fancyhf{}
    \fancyfoot[C]{Título do Documento}
    \fancyfoot[R]{Página \thepage\ de \pageref{LastPage}}
    \renewcommand{\headrulewidth}{0pt}
    \renewcommand{\footrulewidth}{0.4pt}
}

% Estilo para primeira página (sem cabeçalho nem rodapé)
\fancypagestyle{firstpage}{
    \fancyhf{}
    \renewcommand{\headrulewidth}{0pt}
    \renewcommand{\footrulewidth}{0pt}
}

% --- Configurações gerais ---
\linespread{1}  % Espaçamento de linha simples
\newtheorem{theorem}{Theorem}[section]  % Define ambiente para teoremas
\graphicspath{{img/}}  % Pasta para figuras

% --- Listings settings ---
\lstset{
  language=Python,
  basicstyle=\ttfamily\footnotesize,
  keywordstyle=\color{blue}\bfseries,
  stringstyle=\color{red},
  commentstyle=\color{gray}\itshape,
  numbers=left,
  numberstyle=\tiny\color{gray},
  stepnumber=1,
  numbersep=8pt,
  backgroundcolor=\color{white},
  showspaces=false,
  showstringspaces=false,
  showtabs=false,
  frame=single,
  rulecolor=\color{black},
  tabsize=4,
  captionpos=b,
  breaklines=true,
  breakatwhitespace=true,
  morekeywords={self},
}


%==============================================================================
% CORPO DO DOCUMENTO
%==============================================================================
\begin{document}

%==============================================================================
% PÁGINAS PRÉ-TEXTUAIS
%==============================================================================
% --- Página de capa ---
\pagenumbering{gobble}  % Remove a numeração de páginas inicialmente
\thispagestyle{firstpage}
\input{front}  % Inclui a página de capa

% --- Sumário e listas ---
\newpage
\pagenumbering{roman}
\setcounter{page}{1}

\tableofcontents
\newpage

% Listas opcionais (comentadas)
%\listoffigures
%\newpage
%\listoftables
%\newpage
%\listofalgorithms  % Lista de algoritmos em pseudocódigo
%\newpage
%\listoflistings  % Lista de algoritmos em formato de código
%\newpage

%==============================================================================
% CONTEÚDO PRINCIPAL
%==============================================================================
\pagenumbering{arabic}  % Inicia numeração arábica (1, 2, 3...)
\setcounter{page}{1}

% --- Seções do documento ---
\input{sections/01_intro}
\clearpage

\input{sections/02_theory}
\clearpage

\input{sections/03_petri}
\clearpage

\input{sections/04_fpga}
\clearpage

\input{sections/05_arduino}
\clearpage

\input{sections/06_sync}
\clearpage

\input{sections/07_fpga_v2}
\clearpage

\input{sections/08_multiple_inputs}
\clearpage

\input{sections/09_sync_buffer}
\clearpage

\input{sections/10_async_buffer}
\clearpage

\input{sections/11_comparasion}
\clearpage

\input{sections/12_conclusion}
\clearpage

%==============================================================================
% PÓS-TEXTUAIS
%==============================================================================
% --- Referências bibliográficas ---
\nocite{*}
\bibliographystyle{unsrtnat}  % Estilo de bibliografia numérico
\bibliography{bibliography}
\clearpage  % Garante que o apêndice comece em uma nova página

% --- Apêndice ---
\appendix
%\input{apendix/gnuradiopy}  % Descomente se tiver conteúdo no apêndice

\end{document}